# ADR 003: Self-Healing Architecture

## Status
Accepted

## Context
Code generated by LLMs, while often correct, can sometimes contain syntax errors, missing imports, or type mismatches. Pushing such code directly to GitHub breaks CI/CD pipelines and frustrates developers.

## Decision
We have implemented a **Self-Healing Loop** (The "Shield").
Before pushing any code, the worker:
1.  Writes the code to a temporary file.
2.  Runs `npx tsc --noEmit` to validate syntax and types.
3.  **If it fails:** Feeds the error log back to Gemini with a "Doctor Prompt" to request a fix.
4.  Retries this process up to 2 times.
5.  Formats the final code with `Prettier` (The "Broom").

## Consequences
### Positive
*   **Reliability:** Significantly reduces the chance of committing broken code.
*   **Dev Experience:** Ensures that PRs are "Green" and formatted to project standards.

### Negative
*   **Runtime:** Adds overhead to the generation process (validation + potential retries).
